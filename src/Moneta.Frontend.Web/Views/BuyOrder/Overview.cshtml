@{
    ViewData["Title"] = "New  buy order";
}

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Overview of the buy order</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Select an account:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="account"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Transaction #:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="number"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Date:</label>
                        <div class="col-sm-9" id="date"><p class="form-control-static" id="date"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Symbol:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="symbol"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Currency:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="currency"></p></div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Quantity:</label>
                        <div class="col-sm-9"<p class="form-control-static" id="quantity"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Price:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="price"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Exchange Rate:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="exchange_rate"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Total:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="total"></p></div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Commission:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="commission"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Exch. Rate Costs:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="exchange_rate_costs"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Stock Market Tax:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="stock_market_tax"></p></div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Total:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="total_costs"></p></div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Total:</label>
                        <div class="col-sm-9"><p class="form-control-static" id="grand_total"></p></div>
                    </div>
                    <div class="hr-line-dashed"></div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script type="text/javascript">
        var id = "@(ViewContext.RouteData.Values["id"])"
        var total = 0;


        $(document).ready(function () {
            $.ajax({
                'url': "/buyorder/" + id,
                'method': "GET",
                'contentType': 'application/json'
            }).done(function (data) {
                $("#account").text(data.selectedAccount);
                $("#number").text(data.transactionNumber);
                $("#date").text(data.transactionDate);
                $("#symbol").text(data.symbol);
                $("#currency").text(data.currency);
            });

            $.ajax({
                'url': "/buyorder/" + id + "/amount",
                'method': "GET",
                'contentType': 'application/json'
            }).done(function (data) {
                cur = data.currency

                $("#price").text(data.price + " " + data.priceCurrency);
                $("#quantity").text(data.quantity);
                $("#exchange_rate").text(data.exchangeRate);
                $("#total").text(data.total + " " + cur);
                total += parseFloat(data.total);
                $("#grand_total").text(total + " " + cur);
            });

            $.ajax({
                'url': "/buyorder/" + id + "/costs",
                'method': "GET",
                'contentType': 'application/json'
            }).done(function (data) {
                cur = data.currency
                
                $("#commission").text(data.commission + " " + cur);
                $("#exchange_rate_costs").text(data.costExchangeRate);
                $("#stock_market_tax").text(data.stockMarketTax);
                $("#total_costs").text(data.total + " " + cur);
                total += parseFloat(data.total);
                $("#grand_total").text(total + " " + cur);
            });
        });
    </script>
}